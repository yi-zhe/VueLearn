<!--

-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>列表过滤</title>
        <script type="text/javascript" src="../js/vue.js"></script>
    </head>
    <body>
        <div id="root">
            <h2>人员列表</h2>
            <input type="text" v-model="keyWord" />
            <ul>
                <li v-for="(person, index) in filteredPerson" :key="person.id">{{person.name}}-{{person.age}}</li>
            </ul>

        </div>
    </body>
    <script type="text/javascript">
        Vue.config.productionTip = false
        // 使用计算属性实现
        // const vm = new Vue({
        //     el: '#root',
        //     data: {
        //         persons: [{
        //                 id: '001',
        //                 name: '周冬雨',
        //                 age: 18
        //             },
        //             {
        //                 id: '002',
        //                 name: '马冬梅',
        //                 age: 19
        //             }, {
        //                 id: '003',
        //                 name: '周杰伦',
        //                 age: 20
        //             }, {
        //                 id: '004',
        //                 name: '温兆伦',
        //                 age: 20
        //             }

        //         ],
        //         keyWord: ''
        //     },
        //     computed: {
        //         filteredPerson() {
        //             return this.persons.filter((person) => {
        //                 return person.name.indexOf(this.keyWord) !== -1
        //             })
        //         }
        //     }
        // })
        // 使用监视属性实现
        const vm = new Vue({
            el: '#root',
            data: {
                persons: [{
                        id: '001',
                        name: '周冬雨',
                        age: 18
                    },
                    {
                        id: '002',
                        name: '马冬梅',
                        age: 19
                    }, {
                        id: '003',
                        name: '周杰伦',
                        age: 20
                    }, {
                        id: '004',
                        name: '温兆伦',
                        age: 20
                    }

                ],
                keyWord: '',
                filteredPerson: []
            },
            watch: {
                keyWord: {
                    immediate: true,
                    handler(val) {
                        this.filteredPerson = this.persons.filter((person) => {
                            return person.name.indexOf(val) !== -1
                        })
                    }
                }
            }
        })
    </script>
</html>